#!/bin/bash
# conf/sssd_kerberos_setup.vars.conf
# Configuration variables for the SSSD/Kerberos setup script.
# This file is sourced by the main script to provide default values for prompts
# and to configure its behavior.

# =============================================================================
# Source Common AD/Kerberos Configuration
# =============================================================================
# Most domain, OU, and NTP settings are centralized in kerberos_setup.vars.conf
# to avoid duplication. Edit that file to change common settings.

# Determine config directory for sourcing
_CONF_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd)"

if [[ -f "${_CONF_DIR}/lib_kerberos_setup.vars.conf" ]]; then
    # shellcheck source=lib_kerberos_setup.vars.conf
    source "${_CONF_DIR}/lib_kerberos_setup.vars.conf"
elif [[ -f "${SCRIPT_DIR}/../config/lib_kerberos_setup.vars.conf" ]]; then
    source "${SCRIPT_DIR}/../config/lib_kerberos_setup.vars.conf"
fi

# =============================================================================
# SSSD-SPECIFIC SETTINGS
# =============================================================================
# These settings are unique to SSSD or override common defaults.

## -----------------------------------------------------------------------------
## SSSD Behavior and User Mapping
## -----------------------------------------------------------------------------

# The template for creating home directories for AD users on their first login.
# SSSD-specific format: %u = username (shortname), %d = domain name (lowercase)
# Example: /home/PERSONALE/%u will result in /home/PERSONALE/gianfranco.samuele2
# Falls back to common DEFAULT_HOME_TEMPLATE if not set
DEFAULT_FALLBACK_HOMEDIR_TEMPLATE="${DEFAULT_HOME_TEMPLATE:-/nfs/home/%U}"

# Determines how users log in.
# "false" (Recommended for simplicity): Users log in with their shortname (e.g., 'gianfranco.samuele2').
# "true": Users must log in with their full User Principal Name (e.g., 'gianfranco.samuele2@personale.dir.unibo.it').
DEFAULT_USE_FQNS="false"

# GPO (Group Policy Object) mapping for services. This allows AD GPOs to control
# access to specific services on the Linux host. For Posit/RStudio integration,
# this is often set to "+rstudio". Leave empty ("") to disable.
DEFAULT_AD_GPO_MAP_SERVICE="+rstudio, +nginx"

## -----------------------------------------------------------------------------
## SSSD-Specific OS Name Override (optional)
## -----------------------------------------------------------------------------
# Uncomment to override the common DEFAULT_OS_NAME for SSSD
# DEFAULT_OS_NAME="Linux Server"
