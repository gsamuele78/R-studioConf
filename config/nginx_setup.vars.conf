# ----------------------------------------------------------------
# NGINX SETUP VARS (v2.1)
# ----------------------------------------------------------------

# --- Certificate Mode ---
# Set the certificate mode. Valid options are:
# "SELF_SIGNED"  - Generate a self-signed certificate.
# "LETS_ENCRYPT" - Use a Let's Encrypt certificate (requires a public domain).
CERT_MODE="SELF_SIGNED"

# --- Domain and Paths ---
# The primary domain or IP address for the server.
DOMAIN_OR_IP="your_domain_or_ip"
# Base directory for Nginx configurations.
NGINX_DIR="/etc/nginx"
# Directory to store generated template snippets.
NGINX_TEMPLATE_DIR="/etc/nginx/templates"
# Log directory for the site.
LOG_DIR="/var/log/nginx"
# Path for the Diffie-Hellman parameter file, used for enhancing security.
DHPARAM_PATH="/etc/nginx/dhparam.pem"


# --- R-Studio and Web Services Ports ---
# Port where R-Studio Server is listening.
RSTUDIO_PORT="8787"
# Port for the Web Terminal service (ttyd).
WEB_TERMINAL_PORT="2222"
# Port for the Web File Manager service (File Browser).
# FILEBROWSER_PORT="2223"
# Nextcloud Target URL
NEXTCLOUD_TARGET_URL="https://192.168.1.100"

# --- Self-Signed Certificate Details ---
# Directory to store the SSL certificate and key.
SSL_CERT_DIR="/etc/nginx/ssl"
# Certificate validity in days.
SSL_DAYS="365"
# Certificate subject information.
SSL_COUNTRY="US"
SSL_STATE="New York"
SSL_LOCALITY="New York"
SSL_ORGANIZATION="Global Tech"
SSL_ORG_UNIT="IT Department"

# --- Let's Encrypt Details (used if CERT_MODE="LETS_ENCRYPT") ---
LE_EMAIL="your-email@example.com"
LE_CERT_DIR="/etc/letsencrypt/live"

# ================================================================
# AUTHENTICATION BACKEND CONFIGURATION (NEW)
# ================================================================
# Choose authentication backend for Nginx PAM integration:
# "SSSD"   - SSSD + Kerberos (recommended for caching, reduced AD load)
# "SAMBA"  - Samba + Kerberos (for SMB shares, direct AD auth, real-time lookups)
AUTH_BACKEND="SSSD"


# --- Active Directory Domain Configuration ---
AD_DOMAIN_LOWER="example.com"
AD_DOMAIN_UPPER="EXAMPLE.COM"
# Realm for Kerberos (typically same as AD_DOMAIN_UPPER)
AD_REALM="${AD_DOMAIN_UPPER}"


# ================================================================
# SSSD-SPECIFIC CONFIGURATION (used if AUTH_BACKEND="SSSD")
# ================================================================
# SSSD provides user/group caching and reduces load on AD
SSSD_CONFIG_DIR="/etc/sssd"
SSSD_DB_DIR="/var/lib/sss/db"
# Comma-separated list of AD groups allowed SSH/service access
SSSD_ALLOWED_GROUPS=""
# Cache timeout (seconds)
SSSD_CACHE_TIMEOUT="3600"


# ================================================================
# SAMBA/WINBIND-SPECIFIC CONFIGURATION (used if AUTH_BACKEND="SAMBA")
# ================================================================
# Samba/Winbind provides direct AD integration with SMB/CIFS support
SAMBA_CONFIG_PATH="/etc/samba/smb.conf"
SAMBA_LOG_LEVEL="1"
SAMBA_MAX_LOG_SIZE="50"
# Winbind ID mapping ranges (for proper UID/GID assignment)
IDMAP_RANGE_LOW="10000"
IDMAP_RANGE_HIGH="999999"
# Template home directory path (for Winbind)
TEMPLATE_HOMEDIR="/nfs/home/%U"
# Workgroup or domain name (Samba)
SAMBA_WORKGROUP="WORKGROUP"
# Comma-separated list of AD groups allowed access
SAMBA_ALLOWED_GROUPS=""


# ================================================================
# PAM NGINX SERVICE CONFIGURATION
# ================================================================
# Common PAM configuration for Nginx authentication
PAM_NGINX_SERVICE_NAME="nginx"
# Optional: PAM authentication message
PAM_AUTH_MESSAGE="Secure Area - Active Directory Credentials Required"


# ================================================================
# COMMON AD/KERBEROS SETTINGS
# ================================================================
# Optional: Specific AD admin user for realm join (interactive if empty)
AD_ADMIN_USER=""
# Optional: Computer OU for domain join (if using realm join)
COMPUTER_OU=""
# SSH port for testing (if applicable)
SSH_PORT="22"


