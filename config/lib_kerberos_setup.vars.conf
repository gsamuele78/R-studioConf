#!/bin/bash
# conf/kerberos_setup.vars.conf
# Common Kerberos and AD Integration Configuration Variables
# Sourced by sssd_kerberos_setup.vars.conf and samba_kerberos_setup.vars.conf
# Edit these values ONCE to configure both SSSD and Samba backends.

## =============================================================================
## COMMON ACTIVE DIRECTORY SETTINGS
## =============================================================================
## These settings are shared by both SSSD and Samba configurations.
## Edit them here to avoid duplication.

## -----------------------------------------------------------------------------
## Domain and Kerberos Settings
## -----------------------------------------------------------------------------

# The lowercase name of your Active Directory domain.
DEFAULT_AD_DOMAIN_LOWER="personale.dir.unibo.it"

# The uppercase Kerberos Realm name. This is typically the uppercase version of the domain.
DEFAULT_AD_DOMAIN_UPPER="PERSONALE.DIR.UNIBO.IT"

# An EXAMPLE of a User Principal Name (UPN) for an AD administrator account that has
# permissions to join computers to the domain. This is used in prompts to guide the user.
DEFAULT_AD_ADMIN_USER_EXAMPLE="gianfranco.samuele2@PERSONALE.DIR.UNIBO.IT"

## -----------------------------------------------------------------------------
## Computer Object Settings in Active Directory
## -----------------------------------------------------------------------------

# The base Distinguished Name (DN) of the Organizational Unit (OU) where the
# computer object for this machine will be created in Active Directory.
DEFAULT_COMPUTER_OU_BASE="OU=Servizi_Informatici,OU=Dip-BIGEA,OU=Dsa.Auto"

# The customizable part of the OU. This will be prepended to the base OU.
# For example, resulting in: OU=ServerFarm_Navile,OU=Servizi_Informatici,...
DEFAULT_COMPUTER_OU_CUSTOM_PART="OU=ServerFarm_Navile"

# The string to set for the 'OperatingSystem' attribute of the computer object in AD.
# Note: SSSD uses "Linux Server", Samba uses "Linux". Override in specific config if needed.
DEFAULT_OS_NAME="Linux"

## -----------------------------------------------------------------------------
## Access Control Settings
## -----------------------------------------------------------------------------

# A comma-separated list of Active Directory group names. If set, only members
# of these groups will be allowed to log in to the system.
# Leave empty ("") to allow all authenticated domain users.
DEFAULT_SIMPLE_ALLOW_GROUPS="STR968-Informatica,Str00968-biome,Str00968-lifewatch"

## -----------------------------------------------------------------------------
## Home Directory Template (Common Default)
## -----------------------------------------------------------------------------

# The template for creating home directories for AD users.
# This is the common default; SSSD and Samba configs may override with their own formats.
# Common formats:
#   SSSD:  /home/%d/%u (domain/username) or /nfs/home/%U
#   Samba: /nfs/home/%U (Samba uses %U for username)
DEFAULT_HOME_TEMPLATE="/nfs/home/%U"

## -----------------------------------------------------------------------------
## Time Synchronization (NTP) Settings
## -----------------------------------------------------------------------------

# The preferred NTP client to install and configure.
# Options: "chrony" (recommended), "ntp", "systemd-timesyncd"
NTP_PREFERRED_CLIENT="chrony"

# A list of public NTP servers to use as a fallback if AD domain controllers
# cannot be discovered or are unreachable.
DEFAULT_NTP_FALLBACK_POOLS_CHRONY_NTP=(
    "pool 2.debian.pool.ntp.org iburst"
)

# A space-separated string of public NTP servers for systemd-timesyncd's FallbackNTP setting.
DEFAULT_NTP_FALLBACK_POOLS_SYSTEMD="0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org"


## =============================================================================
## KERBEROS REALM CONFIGURATION (UNIBO Specific)
## =============================================================================

## -----------------------------------------------------------------------------
## DIR.UNIBO.IT
## -----------------------------------------------------------------------------
DEFAULT_DIR_UNIBO_REALM="DIR.UNIBO.IT"
DEFAULT_DIR_UNIBO_KDC="dcrdir02.dir.unibo.it"
DEFAULT_DIR_UNIBO_ADMIN_SERVER="dcrdir02.dir.unibo.it"

## -----------------------------------------------------------------------------
## PERSONALE.DIR.UNIBO.IT
## -----------------------------------------------------------------------------
DEFAULT_PERSONALE_UNIBO_REALM="PERSONALE.DIR.UNIBO.IT"
DEFAULT_PERSONALE_UNIBO_KDC="dcrpersonale01.personale.dir.unibo.it"
DEFAULT_PERSONALE_UNIBO_ADMIN_SERVER="dcrpersonale02.personale.dir.unibo.it"

## -----------------------------------------------------------------------------
## STUDENTI.DIR.UNIBO.IT
## -----------------------------------------------------------------------------
DEFAULT_STUDENTI_UNIBO_REALM="STUDENTI.DIR.UNIBO.IT"
DEFAULT_STUDENTI_UNIBO_KDC="edge.studenti.dir.unibo.it"
DEFAULT_STUDENTI_UNIBO_ADMIN_SERVER="pole.studenti.dir.unibo.it"

## -----------------------------------------------------------------------------
## Domain Mappings for [domain_realm]
## -----------------------------------------------------------------------------
DEFAULT_DOMAIN_REALM_MAPPINGS=(
    ".dir.unibo.it=DIR.UNIBO.IT"
    "dir.unibo.it=DIR.UNIBO.IT"
    ".personale.dir.unibo.it=PERSONALE.DIR.UNIBO.IT"
    "personale.dir.unibo.it=PERSONALE.DIR.UNIBO.IT"
    ".studenti.dir.unibo.it=STUDENTI.DIR.UNIBO.IT"
    "studenti.dir.unibo.it=STUDENTI.DIR.UNIBO.IT"
)
