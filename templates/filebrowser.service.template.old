[Unit]
Description=File Browser - Web File Manager
After=network.target

[Service]
User={{FILEBROWSER_USER}}
Group={{FILEBROWSER_USER}}

# ### FIX ###
# The --no-auth flag is deprecated. The modern way to configure proxy authentication
# is to set the auth method to 'proxy' and specify the header. This single line
# replaces the previous three separate --no-auth, --auth.method, and --auth.header flags.
#
ExecStart=/usr/local/bin/filebrowser \
    --address 127.0.0.1 \
    --port {{FILEBROWSER_PORT}} \
    --root / \
    --database {{FILEBROWSER_DB_PATH}} \
    --auth.method=proxy \
    --auth.proxy.header="X-Forwarded-User"

Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target